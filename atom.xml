<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Jack Wu]]></title>
  <subtitle><![CDATA[欢迎来到我的博客！]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://wsl222000.github.io/"/>
  <updated>2016-08-24T07:16:19.093Z</updated>
  <id>http://wsl222000.github.io/</id>
  
  <author>
    <name><![CDATA[wsl]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[keepalived实现nginx的高可用]]></title>
    <link href="http://wsl222000.github.io/2016/08/24/keepalived/"/>
    <id>http://wsl222000.github.io/2016/08/24/keepalived/</id>
    <published>2016-08-24T07:09:14.000Z</published>
    <updated>2016-08-24T07:16:19.093Z</updated>
    <content type="html"><![CDATA[<p>1.使用yum安装keepalived<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> keepalived -y</span><br></pre></td></tr></table></figure></p>
<p>2.修改配置文件keepalived.conf</p>
<p>主服务器配置文件<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">global_defs &#123;</span><br><span class="line">    router_id NodeA</span><br><span class="line">&#125;</span><br><span class="line">vrrp_script check_run &#123;</span><br><span class="line">    script <span class="string">"/etc/keepalived/check_nginx.sh"</span>　　<span class="comment">#自定义检查nginx的脚本</span></span><br><span class="line">    interval <span class="number">2</span></span><br><span class="line">    weight <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    <span class="keyword">state</span> MASTER    <span class="comment">#设置为主服务器</span></span><br><span class="line">    interface eth0  <span class="comment">#监测网络接口</span></span><br><span class="line">    virtual_router_id <span class="number">51</span>  <span class="comment">#虚拟路由标识，主、备必须一样</span></span><br><span class="line">    priority <span class="number">100</span>   <span class="comment">#(主、备机取不同的优先级,主机值较大,备份机值较小,值越大优先级越高)</span></span><br><span class="line">    advert_int <span class="number">1</span>   <span class="comment">#VRRP Multicast广播周期秒数</span></span><br><span class="line">    nopreempt <span class="comment">#恢复后也不抢占资源</span></span><br><span class="line">    authentication &#123;</span><br><span class="line">    auth_type PASS  <span class="comment">#VRRP认证方式，主备必须一致</span></span><br><span class="line">    auth_pass <span class="number">1111</span>   <span class="comment">#(密码)</span></span><br><span class="line">    &#125;</span><br><span class="line">    track_script &#123;</span><br><span class="line">        check_run</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">    　　虚拟IP/掩码 <span class="comment">#VRRP HA虚拟地址</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>检查nginx服务状态的脚本，check_nginx.sh<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line">netstat -npl|grep -q nginx</span><br><span class="line"><span class="keyword">if</span> [[ $? <span class="operator">-ne</span> <span class="number">0</span> ]]; <span class="keyword">then</span></span><br><span class="line">  /usr/<span class="built_in">local</span>/nginx/sbin/nginx</span><br><span class="line">  <span class="keyword">if</span> [[ $? <span class="operator">-ne</span> <span class="number">0</span> ]]; <span class="keyword">then</span></span><br><span class="line">    service keepalived stop</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">备用服务器配置文件</span><br></pre></td></tr></table></figure></p>
<p>global_defs {<br>    router_id NodeB<br>}<br>vrrp_script check_run{<br>    script “/etc/keepalived/check_nginx.sh”<br>    interval 2<br>    weight 2<br>}<br>vrrp_instance VI_1 {<br>    state BACKUP    #设置为备服务器<br>    interface eth0  #监测网络接口<br>    virtual_router_id 51  #虚拟路由标识，主、备必须一样<br>    priority 90   #(主、备机取不同的优先级,主机值较大,备份机值较小,值越大优先级越高)<br>    advert_int 1   #VRRP Multicast广播周期秒数<br>    nopreempt #恢复后也不抢占资源<br>    authentication {<br>    auth_type PASS  #VRRP认证方式，主备必须一致<br>    auth_pass 1111   #(密码)<br>    }<br>    track_script {<br>        check_run<br>    }<br>    virtual_ipaddress {<br>    　　虚拟IP/掩码  #VRRP HA虚拟地址<br>    }<br>}<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3.主、备服务器启动keepalived和nginx服务</span><br></pre></td></tr></table></figure></p>
<p> /etc/init.d/keepalived start<br> /etc/init.d/nginx start<br> <figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查看主服务器虚拟<span class="literal">IP</span>是否存在</span><br></pre></td></tr></table></figure></p>
<p>ip addr<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">关闭主服务器的keepalived服务，测试虚拟<span class="literal">IP</span>是否切换到备用服务器上</span><br><span class="line"><span class="label"></span><br><span class="line">ps:</span></span><br><span class="line">当主备服务器都出现了VIP，可能是网络环境不支持广播方式，此时要使用单播方式</span><br></pre></td></tr></table></figure></p>
<p>unicast_src_ip 10.205.22.185    #本机IP<br>unicast_peer {<br>         10.205.22.186  #备机IP<br>     }<br>```</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>1.使用yum安装keepalived<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td c]]>
    </summary>
    
      <category term="keepalived" scheme="http://wsl222000.github.io/tags/keepalived/"/>
    
      <category term="linux" scheme="http://wsl222000.github.io/categories/linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[MySQL5.6基于GTID的主从复制配置]]></title>
    <link href="http://wsl222000.github.io/2016/08/24/824/"/>
    <id>http://wsl222000.github.io/2016/08/24/824/</id>
    <published>2016-08-24T02:58:02.000Z</published>
    <updated>2016-08-24T03:45:04.603Z</updated>
    <content type="html"><![CDATA[<p>GTID简介：<br>全局事务标示符（Global Transactions Identifier）是MySQL 5.6复制的一个新特性。<br>GTID实际上是由UUID+TID组成的。其中UUID是一个MySQL实例的唯一标识。TID代表了该实例上已经提交的事务数量，并且随着事务提交单调递增。下面是一个GTID的具体形式。<br>1、在MySQL5.6以前对于主从复制出现问题有时候需要你分析BINLOG找到POS点,然后在CHANG MASTER TO.对于新手来说很容易犯错,造成主从复制错误.在新版本中,不必在需要寻找BINLOG和POS点,你只需要知道MASTER的IP、密码、端口就可以,因为MySQL会从内部GTID机制自动找到同步点.<br>2、多线程复制,在MySQL5.6之前,复制是单线程队列式的,只能一个一个运行.在新版中支持基于库的多线程复制,但是库里的表不能多线程.</p>
<a id="more"></a>
<h3 id="主MySQL配置文件修改：">主MySQL配置文件修改：</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">server-id=</span><span class="number">185</span> <span class="comment">#和从MySQL不同</span></span><br><span class="line"><span class="variable">log-bin=</span>mysql-bin</span><br><span class="line"><span class="variable">expire-logs-days=</span><span class="number">14</span>    <span class="comment">#二进制日志周期（按需配置）</span></span><br><span class="line"><span class="variable">binlog-format=</span>row    <span class="comment">#使用row格式</span></span><br><span class="line"><span class="variable">log-slave-updates=</span><span class="constant">true</span></span><br><span class="line"><span class="variable">gtid-mode=</span>on    <span class="comment">#开启GTID模式</span></span><br><span class="line"><span class="variable">slave_parallel_workers=</span><span class="number">4</span>           <span class="comment">#开启基于库的多线程复制默认0不开启 </span></span><br><span class="line"><span class="variable">enforce-gtid-consistency=</span><span class="constant">true</span>     <span class="comment">#强制GTID的一致性</span></span><br><span class="line"><span class="variable">master-info-repository=</span>TABLE     <span class="comment">#主服信息记录库=表/文件</span></span><br><span class="line"><span class="variable">relay-log-info-repository=</span>TABLE   <span class="comment">#中继日志信息记录库</span></span><br><span class="line"><span class="variable">sync-master-info=</span><span class="number">1</span>                <span class="comment">#同步主库信息</span></span><br><span class="line"><span class="variable">innodb_file_per_table=</span><span class="number">1</span>    <span class="comment">#使用独立表空间</span></span><br></pre></td></tr></table></figure>
<h3 id="主MySQL创建复制账号：">主MySQL创建复制账号：</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">grant</span> replication <span class="keyword">slave</span>,replication client <span class="keyword">on</span> *.* <span class="keyword">to</span> <span class="string">'repl'</span>@<span class="string">'10.205.22.186'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'password'</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span></span><br></pre></td></tr></table></figure>
<h3 id="从MySQL配置文件修改：">从MySQL配置文件修改：</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">server-id=</span><span class="number">186</span> <span class="comment">#和主MySQL不同</span></span><br><span class="line"><span class="variable">log-bin=</span>mysql-bin</span><br><span class="line"><span class="variable">expire-logs-days=</span><span class="number">14</span>    <span class="comment">#二进制日志周期（按需配置）</span></span><br><span class="line"><span class="variable">binlog-format=</span>row    <span class="comment">#使用row格式</span></span><br><span class="line"><span class="variable">log-slave-updates=</span><span class="constant">true</span></span><br><span class="line"><span class="variable">gtid-mode=</span>on    <span class="comment">#开启GTID模式</span></span><br><span class="line"><span class="variable">slave_parallel_workers=</span><span class="number">4</span>           <span class="comment">#开启基于库的多线程复制默认0不开启 </span></span><br><span class="line"><span class="variable">enforce-gtid-consistency=</span><span class="constant">true</span>     <span class="comment">#强制GTID的一致性</span></span><br><span class="line"><span class="variable">master-info-repository=</span>TABLE     <span class="comment">#主服信息记录库=表/文件</span></span><br><span class="line"><span class="variable">relay-log-info-repository=</span>TABLE   <span class="comment">#中继日志信息记录库</span></span><br><span class="line"><span class="variable">sync-master-info=</span><span class="number">1</span>                <span class="comment">#同步主库信息</span></span><br><span class="line"><span class="variable">innodb_file_per_table=</span><span class="number">1</span>    <span class="comment">#使用独立表空间</span></span><br></pre></td></tr></table></figure>
<h3 id="从MySQL执行：">从MySQL执行：</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">change</span> <span class="keyword">master</span> <span class="keyword">to</span> master_host=<span class="string">'10.205.22.185'</span>,master_port=<span class="number">3306</span>,master_user=<span class="string">'repl'</span>,master_password=<span class="string">'password'</span>,MASTER_AUTO_POSITION=<span class="number">1</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">start</span> <span class="keyword">slave</span>;</span></span><br></pre></td></tr></table></figure>
<p>在主MySQL写入数据，查从MySQL是否同步成功</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>GTID简介：<br>全局事务标示符（Global Transactions Identifier）是MySQL 5.6复制的一个新特性。<br>GTID实际上是由UUID+TID组成的。其中UUID是一个MySQL实例的唯一标识。TID代表了该实例上已经提交的事务数量，并且随着事务提交单调递增。下面是一个GTID的具体形式。<br>1、在MySQL5.6以前对于主从复制出现问题有时候需要你分析BINLOG找到POS点,然后在CHANG MASTER TO.对于新手来说很容易犯错,造成主从复制错误.在新版本中,不必在需要寻找BINLOG和POS点,你只需要知道MASTER的IP、密码、端口就可以,因为MySQL会从内部GTID机制自动找到同步点.<br>2、多线程复制,在MySQL5.6之前,复制是单线程队列式的,只能一个一个运行.在新版中支持基于库的多线程复制,但是库里的表不能多线程.</p>]]>
    
    </summary>
    
      <category term="MySQL" scheme="http://wsl222000.github.io/tags/MySQL/"/>
    
      <category term="MySQL" scheme="http://wsl222000.github.io/categories/MySQL/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[一场戏]]></title>
    <link href="http://wsl222000.github.io/2015/06/17/article/"/>
    <id>http://wsl222000.github.io/2015/06/17/article/</id>
    <published>2015-06-17T06:27:18.000Z</published>
    <updated>2015-06-17T06:42:27.730Z</updated>
    <content type="html"><![CDATA[<p>我梦见一个大戏台。</p>
<p>　　戏台上晃晃悠悠地出现好几个大将军。他们穿着鲜亮耀眼的盔甲，一枚枚鲜衣怒马，宛若神人。然后，就看他们打将了起来，吆喝声新奇尖响，仿佛真要开天辟地了。再然后，看他们的盔甲一点点地化掉，露出了跟我们一样的肉身。</p>
<p>　　原来，那盔甲是冰做的。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>我梦见一个大戏台。</p>
<p>　　戏台上晃晃悠悠地出现好几个大将军。他们穿着鲜亮耀眼的盔甲，一枚枚鲜衣怒马，宛若神人。然后，就看他们打将了起来，吆喝声新奇尖响，仿佛真要开天辟地了。再然后，看他们的盔甲一点点地化掉，露出了跟我们一样的肉身。</p>
<p>　　原来，那盔甲]]>
    </summary>
    
      <category term="随笔" scheme="http://wsl222000.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[zabbix笔记]]></title>
    <link href="http://wsl222000.github.io/2015/06/05/zabbix/"/>
    <id>http://wsl222000.github.io/2015/06/05/zabbix/</id>
    <published>2015-06-05T08:22:22.000Z</published>
    <updated>2015-06-08T02:16:48.709Z</updated>
    <content type="html"><![CDATA[<ul>
<li>安装参考：<br><a href="http://bguncle.blog.51cto.com/3184079/1330247" target="_blank" rel="external">http://bguncle.blog.51cto.com/3184079/1330247</a><a id="more"></a></li>
<li><p>zabbix配置报警设置：<br><a href="http://www.centoscn.com/CentosServer/log/2013/0807/1168.html" target="_blank" rel="external">http://www.centoscn.com/CentosServer/log/2013/0807/1168.html</a><br><a href="http://waringid.blog.51cto.com/65148/1142579" target="_blank" rel="external">http://waringid.blog.51cto.com/65148/1142579</a></p>
</li>
<li><p>自定义脚本位置</p>
<blockquote>
<p>vim /usr/local/zabbix/etc/zabbix_server.conf<br>  AlertScriptsPath=</p>
</blockquote>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<ul>
<li>安装参考：<br><a href="http://bguncle.blog.51cto.com/3184079/1330247">http://bguncle.blog.51cto.com/3184079/1330247</a>]]>
    
    </summary>
    
      <category term="zabbix" scheme="http://wsl222000.github.io/categories/zabbix/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[python 显示目录内容]]></title>
    <link href="http://wsl222000.github.io/2015/06/05/python3/"/>
    <id>http://wsl222000.github.io/2015/06/05/python3/</id>
    <published>2015-06-05T06:47:43.000Z</published>
    <updated>2015-06-05T07:45:03.265Z</updated>
    <content type="html"><![CDATA[<p>显示目录里面的内容<br><a id="more"></a><br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import <span class="built_in">os</span>, <span class="built_in">string</span>, sys</span><br><span class="line">dir=<span class="string">'/tmp'</span></span><br><span class="line">files=<span class="built_in">os</span>.listdir(dir)</span><br><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> files:</span><br><span class="line">  <span class="built_in">print</span> dir+<span class="built_in">os</span>.sep+d</span><br></pre></td></tr></table></figure></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import os</span><br><span class="line"><span class="keyword">dir</span>='/tmp'</span><br><span class="line">files=os.listdir(<span class="keyword">dir</span>)</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">d</span> <span class="keyword">in</span> files:</span><br><span class="line">  <span class="keyword">print</span> <span class="literal">d</span></span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import os</span><br><span class="line">dir=<span class="string">'/tmp'</span></span><br><span class="line"><span class="keyword">for</span> <span class="tag">i</span> <span class="keyword">in</span> os.<span class="function"><span class="title">listdir</span><span class="params">(dir)</span></span>:</span><br><span class="line">  print i</span><br></pre></td></tr></table></figure>
<p>遍历目录<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import os, string, sys</span><br><span class="line">dir=<span class="string">'/tmp'</span></span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.<span class="function"><span class="title">walk</span><span class="params">(dir)</span></span>:</span><br><span class="line">  <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">    print os<span class="class">.path</span><span class="class">.join</span>(root, name)</span><br></pre></td></tr></table></figure></p>
<p>import glob<br>filelist = glob.glob(‘<em>.jpg’) + glob.glob(‘</em>.gif’)<br>print filelist<br>详细出处参考：<a href="http://www.jb51.net/article/26537.htm" target="_blank" rel="external">http://www.jb51.net/article/26537.htm</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>显示目录里面的内容<br>]]>
    
    </summary>
    
      <category term="python" scheme="http://wsl222000.github.io/categories/python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[python 文件存在则输出]]></title>
    <link href="http://wsl222000.github.io/2015/06/05/python2/"/>
    <id>http://wsl222000.github.io/2015/06/05/python2/</id>
    <published>2015-06-05T03:13:44.000Z</published>
    <updated>2015-06-05T03:37:16.808Z</updated>
    <content type="html"><![CDATA[<p>输出文件内容<br><a id="more"></a><br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import os</span><br><span class="line">while <span class="number">1</span>:</span><br><span class="line">  filename=<span class="function"><span class="title">raw_input</span><span class="params">(<span class="string">'Input:'</span>)</span></span></span><br><span class="line">  <span class="keyword">if</span> not os<span class="class">.path</span><span class="class">.exists</span>(filename):</span><br><span class="line">    print filename, <span class="string">'is not exist!'</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    print <span class="string">'file is exist!'</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> <span class="function"><span class="title">open</span><span class="params">(filename)</span></span>:</span><br><span class="line">      print line,</span><br><span class="line">    break</span><br></pre></td></tr></table></figure></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import os</span><br><span class="line">while <span class="number">1</span>:</span><br><span class="line">  filename=<span class="function"><span class="title">raw_input</span><span class="params">(<span class="string">'Input:'</span>)</span></span></span><br><span class="line">  <span class="keyword">if</span> os<span class="class">.path</span><span class="class">.exists</span>(filename):</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> <span class="function"><span class="title">open</span><span class="params">(filename)</span></span>:</span><br><span class="line">      print line,</span><br><span class="line">    break</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    print filename, <span class="string">'is not exist!'</span></span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<p>输出文件内容<br>]]>
    
    </summary>
    
      <category term="python" scheme="http://wsl222000.github.io/categories/python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[python 读取文件]]></title>
    <link href="http://wsl222000.github.io/2015/06/04/python/"/>
    <id>http://wsl222000.github.io/2015/06/04/python/</id>
    <published>2015-06-04T08:49:00.000Z</published>
    <updated>2015-06-05T03:29:48.210Z</updated>
    <content type="html"><![CDATA[<h3 id="读取文件一行">读取文件一行</h3><a id="more"></a>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">f=<span class="function"><span class="title">open</span><span class="params">(<span class="string">'/etc/hosts'</span>)</span></span>  </span><br><span class="line">line=f.<span class="function"><span class="title">readline</span><span class="params">()</span></span></span><br><span class="line">print line,</span><br><span class="line">f.<span class="function"><span class="title">close</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<h3 id="读取整个文件">读取整个文件</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import sys</span><br><span class="line">f=<span class="function"><span class="title">open</span><span class="params">(<span class="string">'/etc/hosts'</span>)</span></span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">  print line,  </span><br><span class="line">f.<span class="function"><span class="title">close</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"><span class="keyword">for</span> <span class="tag">i</span> <span class="keyword">in</span> <span class="function"><span class="title">open</span><span class="params">(<span class="string">'/etc/hosts'</span>)</span></span>:</span><br><span class="line">  print <span class="tag">i</span>,</span><br></pre></td></tr></table></figure>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">f=<span class="function"><span class="title">open</span><span class="params">(<span class="string">'/etc/hosts'</span>)</span></span></span><br><span class="line">line=f.<span class="function"><span class="title">readline</span><span class="params">()</span></span></span><br><span class="line">while line:</span><br><span class="line">  print line,</span><br><span class="line">  line=f.<span class="function"><span class="title">readline</span><span class="params">()</span></span></span><br><span class="line">f.<span class="function"><span class="title">close</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<h3 id="逐行读取">逐行读取</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line">f=<span class="built_in">open</span>(<span class="string">'/etc/hosts'</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">  <span class="built_in">line</span>=f.readline()</span><br><span class="line">  print <span class="built_in">line</span>,</span><br><span class="line">  <span class="keyword">if</span> <span class="operator">not</span> <span class="built_in">line</span>:</span><br><span class="line">    break</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<h3 id="读取文件一行">读取文件一行</h3>]]>
    
    </summary>
    
      <category term="python" scheme="http://wsl222000.github.io/categories/python/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ftp虚拟用户配置]]></title>
    <link href="http://wsl222000.github.io/2015/06/04/ftp/"/>
    <id>http://wsl222000.github.io/2015/06/04/ftp/</id>
    <published>2015-06-04T03:18:14.000Z</published>
    <updated>2015-06-05T03:29:41.529Z</updated>
    <content type="html"><![CDATA[<ol>
<li><p>yum安装FTP：</p>
<blockquote>
<p>yum install vsftpd pam<em> db4</em> -y<br><br>设置为系统服务：chkconfig –level 35 vsftpd on</p>
<a id="more"></a>
</blockquote>
</li>
<li><p>vsftpd 开启：</p>
<blockquote>
<p>/etc/init.d/vsftpd start 或者 service vsfptd start<br><br>重启：service vsftpd restart</p>
</blockquote>
</li>
<li><p>配置虚拟用户本地数据组用户登录<br>配置/etc/vsftpd/vsftpd.conf<br><img src="http://i.imgur.com/QEFETjM.png" alt=""></p>
</li>
</ol>
<p>3.1 配置 /etc/pam.d/vsftpd.vu<br><img src="http://i.imgur.com/aIJjCcd.png" alt=""></p>
<p>3.2 创建/etc/vstfpd/vcon文件目录，这下面放置两个文件和一个目录<br>文件vir_user 放用户/密码<br><img src="http://i.imgur.com/9Bk779C.png" alt=""></p>
<p>使用vir_user.db 用命令执行：</p>
<blockquote>
<p>db_load -T -t hash -f /etc/vsftpd/vconf/vir_user /etc/vsftpd/vconf/vir_user.db</p>
</blockquote>
<p>3.3 创建文件夹userlocal 里面放以用户命名的文件<br><img src="http://i.imgur.com/xEbv7CD.png" alt=""></p>
<p>3.4 需要注意的：<a href="http://dngood.blog.51cto.com/446195/1094079/" target="_blank" rel="external">http://dngood.blog.51cto.com/446195/1094079/ </a><br>报错：500 OOPS: bad bool value in config file for: anonymous_enable<br>需要修改，不能有空格：<br>在/etc/vsftpd/vconf/liufeng 编辑这个文件的时候不能有空格！<br><img src="http://i.imgur.com/1njwiKd.png" alt=""></p>
<p>更详细的配置说明：<br><a href="http://bbs.51cto.com/thread-811192-1.html" target="_blank" rel="external">http://bbs.51cto.com/thread-811192-1.html</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<ol>
<li><p>yum安装FTP：</p>
<blockquote>
<p>yum install vsftpd pam<em> db4</em> -y<br><br>设置为系统服务：chkconfig –level 35 vsftpd on</p>]]>
    
    </summary>
    
      <category term="linux" scheme="http://wsl222000.github.io/categories/linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[hexo加github搭建博客]]></title>
    <link href="http://wsl222000.github.io/2015/06/03/hexo-inatll/"/>
    <id>http://wsl222000.github.io/2015/06/03/hexo-inatll/</id>
    <published>2015-06-03T10:14:20.000Z</published>
    <updated>2015-06-04T08:48:26.557Z</updated>
    <content type="html"><![CDATA[<p>参考地址：<br><a href="http://blog.fens.me/hexo-blog-github" target="_blank" rel="external">http://www.cnblogs.com/zhcncn/p/4097881.html</a><br><a href="http://blog.fens.me/hexo-blog-github" target="_blank" rel="external">http://blog.fens.me/hexo-blog-github</a><br><a href="http://blog.lmintlcx.com/post/blog-with-hexo.html" title="使用Hexo搭建博客" target="_blank" rel="external">http://blog.lmintlcx.com/post/blog-with-hexo.html</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>参考地址：<br><a href="http://blog.fens.me/hexo-blog-github" target="_blank" rel="external">http://www.cnblogs.com/zhcncn/p/4097881.html</a><b]]>
    </summary>
    
      <category term="博客" scheme="http://wsl222000.github.io/categories/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
</feed>